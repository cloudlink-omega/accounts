<!-- Primary content -->
<div class="container mx-auto px-4 py-8">
    <div class="container text-center justify-center mx-auto mb-4 text-black dark:text-white">
        <span class="flex items-center justify-center pb-4">
            <img class="rounded-xl" src="{{ .BaseURL }}{{ .Profile }}" alt="Avatar">               
        </span>
        <h1 id="prompt" class="text-2xl font-bold dark:text-white mt-4 mb-4">Are you sure you want to logout?</h1>
        <span id="green_message" class="hidden inline-flex items-center mt-4 gap-1 px-2 py-1 rounded-full text-2xl font-medium bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300"></span>
        <span id="red_message" class="hidden inline-flex items-center mt-4 gap-1 px-2 py-1 rounded-full text-2xl font-medium bg-red-100 text-red-700 dark:bg-red-900/50 dark:text-red-300"></span>
        <div class="flex flex-wrap block flex-column gap-3 justify-center mt-2 px-4">
            <button id="logout" type="button" class="w-full px-6 py-3 bg-white dark:bg-gray-600 hover:font-bold hover:bg-red-400 dark:hover:bg-red-400 text-black dark:text-white hover:text-white rounded-xl 
                    font-medium transition-all duration-300 
                    hover:shadow-lg hover:shadow-red-500/30 focus:ring-2 focus:ring-red-500 focus:ring-offset-2 
                    active:scale-95">
            <span class="flex items-center justify-center gap-2 text-2xl">
                <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18 42H10C8.93913 42 7.92172 41.5786 7.17157 40.8284C6.42143 40.0783 6 39.0609 6 38V10C6 8.93913 6.42143 7.92172 7.17157 7.17157C7.92172 6.42143 8.93913 6 10 6H18" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M32 34L42 24L32 14" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M42 24H18" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>                    
                Logout
            </span>
            </button>
        </div>
    </div>
</div>

<!-- Control script -->
<script type="text/javascript" onload>
$(`#logout`)[0].addEventListener("click", async function(event) {
    event.preventDefault(); // Prevent the default behavior

    // Hide messages
    $(`#red_message`)[0].classList.add("hidden");

    // Show the loading overlay
    $(`#loadingOverlay`)[0].classList.remove("hidden");

    // Request logout
    response = await fetch("{{ .BaseURL }}/api/v0/logout");
    setTimeout(async() => {
        $(`#loadingOverlay`)[0].classList.add("hidden");

        if (response.ok) {
            $(`#logout`)[0].classList.add("hidden");
            $(`#prompt`)[0].classList.add("hidden");
            $(`#green_message`)[0].classList.remove("hidden");
            $(`#green_message`)[0].textContent = "You have been logged out.";

            setTimeout(async() => {
                $(`#loadingOverlay`)[0].classList.remove("hidden");
                setTimeout(async() => {
                    window.location.replace("{{ .Redirect }}");
                }, 1000);
            }, 3000);

        } else {
            $(`#loadingOverlay`)[0].classList.add("hidden");
            $(`#red_message`)[0].classList.remove("hidden");
            $(`#red_message`)[0].textContent = await response.text();
        }
    }, 1000);
});
</script>